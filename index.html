<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é‡œå±±ä¸‰å¤©å…©å¤œï¼š5äººåœ˜æ”»ç•¥</title>
    <style>
        :root {
            --primary: #007bff; /* ç¶“å…¸è— */
            --secondary: #6c757d;
            --bg: #ffffff;
            --text: #2d3436;
            --taxi-bg: #e3f2fd; /* äº¤é€šæ–¹å¡Šè— */
            --taxi-text: #0d47a1;
            --tip-bg: #fff3cd;
            --tip-text: #856404;
            --nav-height: 60px;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0 0 var(--nav-height) 0;
            line-height: 1.6;
        }
        
        /* 1. ç¶“å…¸ Header (é‚„åŸè—è‰²æ¼¸å±¤) */
        .header {
            background: linear-gradient(135deg, #0984e3, #74b9ff);
            color: white;
            padding: 25px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .header h1 { margin: 0; font-size: 22px; font-weight: 700; }
        .header p { margin: 8px 0 0; font-size: 0.9em; opacity: 0.95; }

        .container { padding: 10px 20px; max-width: 800px; margin: 0 auto; }
        
        .page { display: none; animation: fadeIn 0.3s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* 2. ç¶“å…¸ Day æ¨™é¡Œ (è—è‰²è† å›Š) */
        .day-header {
            display: flex;
            align-items: center;
            margin-top: 30px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
        }
        .day-badge {
            background-color: var(--primary);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 800;
            font-size: 0.9em;
            margin-right: 12px;
        }
        .day-title { font-weight: 700; font-size: 1.1em; color: #333; }

        /* 3. ç¶“å…¸æ™‚é–“è»¸ (å·¦å´ç·šæ¢èˆ‡åœ“é») */
        .timeline { position: relative; padding-left: 10px; }
        .timeline-item {
            position: relative;
            padding-left: 25px;
            margin-bottom: 30px;
            border-left: 3px solid #dfe6e9; /* å·¦å´ç°ç·š */
        }
        /* ç©ºå¿ƒåœ“é» */
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 6px;
            width: 13px;
            height: 13px;
            background: white;
            border: 3px solid var(--primary);
            border-radius: 50%;
        }

        .time {
            font-weight: 800;
            color: var(--primary);
            font-size: 0.95em;
            margin-bottom: 4px;
            display: block;
        }
        .activity {
            font-weight: 700;
            font-size: 1.2em;
            margin-bottom: 6px;
            color: #2d3436;
        }
        .details {
            font-size: 0.95em;
            color: #636e72;
            margin-bottom: 8px;
        }

        /* 4. ç¶“å…¸è³‡è¨Šæ–¹å¡Š (è—è‰²äº¤é€šã€é»ƒè‰²ç­†è¨˜) */
        .transport-box {
            background-color: var(--taxi-bg);
            color: var(--taxi-text);
            padding: 12px;
            border-radius: 8px;
            font-size: 0.9em;
            margin-top: 10px;
            border-left: 4px solid #1976d2;
        }
        .tip-box {
            background-color: var(--tip-bg);
            color: var(--tip-text);
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.9em;
            margin-top: 10px;
            border: 1px dashed #e6dbb9;
        }

        /* æŒ‰éˆ•å„ªåŒ–ï¼šä¿æŒç°¡æ½”ï¼Œä½†æ”¾åœ¨è³‡è¨Šå¡Šä¸‹æ–¹ */
        .action-buttons { display: flex; gap: 10px; margin-top: 12px; }
        .btn {
            border: 1px solid #ddd;
            background: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            cursor: pointer;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            text-decoration: none;
            color: #555;
            transition: all 0.2s;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        /* Naver Map æŒ‰éˆ•å¾®èª¿ */
        .btn-map { color: #03C75A; border-color: #03C75A; }
        .btn-map:active { background: #f0fff4; }
        /* è³¼ç‰©æŒ‰éˆ•å¾®èª¿ */
        .btn-shop { color: #ff6b6b; border-color: #ff6b6b; }
        .btn-shop:active { background: #fff0f0; }

        /* è³¼ç‰©æ¸…å–® (ç¶­æŒæ–°ç‰ˆåŠŸèƒ½ï¼šåœ–ç‰‡+æ ¸å–) */
        .shop-item {
            display: flex;
            align-items: flex-start;
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #eee;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
        }
        .shop-check-container { padding-top: 5px; margin-right: 12px; }
        .shop-check { width: 20px; height: 20px; cursor: pointer; }
        
        .shop-img-box {
            width: 70px;
            height: 70px;
            flex-shrink: 0;
            border-radius: 6px;
            margin-right: 12px;
            background-color: #f8f9fa;
            overflow: hidden;
            border: 1px solid #eee;
            display: flex; align-items: center; justify-content: center;
        }
        .shop-img { width: 100%; height: 100%; object-fit: cover; }
        
        .shop-info { flex: 1; }
        .shop-info h4 { margin: 0 0 5px 0; font-size: 1em; }
        .shop-tag { 
            font-size: 0.75em; padding: 2px 8px; border-radius: 12px; 
            display: inline-block; margin-bottom: 5px; font-weight: bold;
        }
        .shop-tag.OY { background: #ffebeb; color: #ff6b6b; }
        .shop-tag.Mart { background: #fff3bf; color: #f08c00; }
        .shop-tag.Department { background: #edf2ff; color: #5c7cfa; }
        
        .shop-item.checked { opacity: 0.5; filter: grayscale(100%); }
        .shop-item.checked h4 { text-decoration: line-through; }

        /* è¨ˆç®—æ©Ÿ */
        .calc-box { background: white; padding: 20px; border-radius: 12px; border: 1px solid #eee; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.9em;}
        .input-group input, .input-group select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; font-size: 16px; box-sizing: border-box; }
        .result-box { background: #e3f2fd; padding: 15px; border-radius: 8px; text-align: center; margin-top: 15px; }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%; height: var(--nav-height);
            background: white; display: flex; justify-content: space-around; align-items: center;
            border-top: 1px solid #eee; z-index: 1000;
        }
        .nav-item { text-align: center; color: #b2bec3; font-size: 0.7em; cursor: pointer; flex: 1; padding: 8px 0; }
        .nav-item.active { color: var(--primary); font-weight: bold; }
        .nav-icon { font-size: 1.5em; display: block; margin-bottom: 2px; }
    </style>
</head>
<body>

    <div class="header">
        <h1>ğŸ‡°ğŸ‡· é‡œå±± 5äººåœ˜ç²¾å¯¦æ”»ç•¥</h1>
        <p>1/10 (äº”) - 1/12 (æ—¥) | åƒè²¨èˆ‡ç¾ç…§ä¹‹æ—…</p>
    </div>

    <div class="container">
        <div id="page-schedule" class="page active"></div>

        <div id="page-shopping" class="page">
            <h3 style="border-left: 5px solid var(--primary); padding-left: 10px; margin-bottom: 20px;">ğŸ›’ å¾…è²·æ¸…å–®</h3>
            <div style="background:#fff3cd; color:#856404; padding:10px; border-radius:6px; font-size:0.85em; margin-bottom:20px;">
                ğŸ’¡ è¨˜å¾—å°‡åœ–ç‰‡æ”¹å (1.jpg, 2.jpg...) ä¸¦æ”¾åœ¨åŒä¸€è³‡æ–™å¤¾ï¼Œæ‰èƒ½é¡¯ç¤ºç…§ç‰‡å–”ï¼
            </div>
            <div id="shopping-list-container"></div>
        </div>

        <div id="page-calc" class="page">
            <h3 style="border-left: 5px solid var(--primary); padding-left: 10px; margin-bottom: 20px;">ğŸ’° å¿«é€Ÿåˆ†å¸³</h3>
            <div class="calc-box">
                <div class="input-group">
                    <label>ç¸½é‡‘é¡ (éŸ“å…ƒ â‚©)</label>
                    <input type="number" id="krw-input" placeholder="è¼¸å…¥é‡‘é¡" inputmode="numeric">
                </div>
                <div class="input-group">
                    <label>åŒ¯ç‡ (1å°å¹£ = å¤šå°‘éŸ“å…ƒ)</label>
                    <input type="number" id="rate-input" value="41.5" inputmode="decimal">
                </div>
                <div class="input-group">
                    <label>åˆ†æ”¤äººæ•¸</label>
                    <select id="split-input">
                        <option value="5">5äºº (æœ¬åœ˜)</option>
                        <option value="4">4äºº</option>
                        <option value="3">3äºº</option>
                        <option value="2">2äºº</option>
                        <option value="1">1äºº</option>
                    </select>
                </div>
                <button onclick="calculate()" class="btn" style="background:var(--primary); color:white; border:none; width:100%; padding:12px; font-size:1em;">è¨ˆç®—æ¯äººå°å¹£</button>
                
                <div class="result-box" id="calc-result" style="display:none;">
                    <div style="font-size:0.9em; opacity:0.8;">ç¸½é¡: <strong id="res-twd">0</strong> TWD</div>
                    <div style="font-size:1.4em; color:#0d47a1; margin-top:5px; font-weight:800;">æ¯äºº <span id="res-split">0</span> å…ƒ</div>
                </div>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchPage('schedule')"><span class="nav-icon">ğŸ“…</span>è¡Œç¨‹</div>
        <div class="nav-item" onclick="switchPage('shopping')"><span class="nav-icon">ğŸ›ï¸</span>æ¸…å–®</div>
        <div class="nav-item" onclick="switchPage('calc')"><span class="nav-icon">ğŸ’¸</span>ç®—éŒ¢</div>
    </div>

<script>
    // ==========================================
    // 1. è³¼ç‰©æ¸…å–® (åŠŸèƒ½ï¼šåœ–ç‰‡æ”¯æ´)
    // ==========================================
    const shoppingData = [
        { name: "numbuzin æ•¸å­—é¢è†œ 3è™Ÿ", tag: "OY", note: "ç¾ç™½æ€¥æ•‘ç¥å™¨ï¼ŒOlive Youngå¿…è²· (4+1çµ„)", img: "1.jpg", bought: false },
        { name: "Cell Fusion C é˜²æ›¬æ£’", tag: "OY", note: "ç¶ è‰²åŒ…è£ï¼Œä¸æ²¾æ‰‹ï¼Œéš¨æ™‚è£œæ“¦", img: "2.jpg", bought: false },
        { name: "LACTO-FIT é¾æ ¹å ‚ç›Šç”ŸèŒ", tag: "OY", note: "é»ƒè‰²ç½è£ï¼Œé£¯å¾Œåƒï¼Œåœ‹æ°‘ç›Šç”ŸèŒ", img: "3.jpg", bought: false },
        { name: "LACTOMEDI å¥³æ€§ç©é›ªè‰ä¹³æ¶²", tag: "OY", note: "ç§å¯†è™•è­·ç†ï¼Œè—è‰²ç®¡ç‹€", img: "4.jpg", bought: false },
        { name: "Gentle Monster å¢¨é¡", tag: "Department", note: "æ–°ä¸–ç•Œç™¾è²¨ 1Fï¼Œè¨˜å¾—é€€ç¨…", img: "", bought: false },
        { name: "HBAF æä»æœ", tag: "Mart", note: "å„ç¨®å£å‘³éƒ½è¦è²· (èœ‚èœœå¥¶æ²¹/å“‡æ²™ç±³)", img: "", bought: false },
        { name: "Bada Sand å¥¶æ²¹é¤…", tag: "Department", note: "é‡œå±±é™å®šä¼´æ‰‹ç¦®ï¼Œæ–°ä¸–ç•ŒB1", img: "", bought: false }
    ];

    // ==========================================
    // 2. è¡Œç¨‹è³‡æ–™ (åŠŸèƒ½ï¼š5äººç‰ˆè³‡è¨Š + Naver Link)
    // ==========================================
    const scheduleData = [
        { day: "Day 1", title: "1/10 (äº”) è¥¿é¢è½åœ° & å—æµ¦æ´", items: [
            { 
                time: "06:10 - 08:30", 
                act: "âœˆï¸ æŠµé”æ©Ÿå ´ & å¯„æ”¾è¡Œæ", 
                nav: "ê¹€í•´êµ­ì œê³µí•­", 
                desc: "å…¥å¢ƒå¾Œç›´æ¥å»è¨ˆç¨‹è»Šæ‹›å‘¼ç«™ã€‚åˆ°é£¯åº—å…ˆå¯„æ”¾è¡Œæ (é‚„ä¸èƒ½é€²æˆ¿)ã€‚",
                transport: "ğŸš• <strong>æ©Ÿå ´ â†’ è¥¿é¢é£¯åº—</strong><br>è»Šç¨‹ï¼šç´„ 30-40 åˆ†é˜<br>è»Šè³‡ï¼šç´„ â‚©18,000 - 22,000 (5äººåˆ†å…©å°è»Š)" 
            },
            { 
                time: "09:00 - 10:30", 
                act: "ğŸ¥£ æ—©é¤ï¼šæ¾äº­3ä»£è±¬è‚‰æ¹¯é£¯", 
                nav: "ì†¡ì •3ëŒ€êµ­ë°¥", 
                desc: "æ¹¯æœ¬èº«ä¸é¹¹ï¼Œè¨˜å¾—åŠ æ¡Œä¸Šé¹¹è¦é†¬èª¿å‘³ã€‚<br>åƒå®Œå¾Œå»æ—é‚Šã€Œè¥¿é¢è€å¥¶å¥¶ã€æ›éŒ¢ã€‚",
                tip: "æ›éŒ¢è«‹æº–å‚™å°å¹£/ç¾é‡‘"
            },
            { 
                time: "11:00 - 13:00", 
                act: "ğŸ“¸ ç”˜å·æ´æ–‡åŒ–æ‘", 
                nav: "ê°ì²œì´ˆë“±í•™êµ", 
                desc: "æ‰¾ã€Œå°ç‹å­ã€æ‹ç…§ã€‚å…¥å£è™•éŠå®¢ä¸­å¿ƒå¯è²·åœ°åœ–ã€‚",
                transport: "ğŸš• <strong>è¥¿é¢ â†’ ç”˜å·æ´ã€Œå…¥å£ã€</strong><br>å®šä½ï¼šç”˜å·å°å­¸å°é¢ (ä¸è¦å¾å±±ä¸‹èµ°)<br>è»Šè³‡ï¼šç´„ â‚©10,000 - 12,000"
            },
            { 
                time: "13:30 - 16:30", 
                act: "ğŸ›ï¸ å—æµ¦æ´ / BIFF / æ¨‚å¤©ç™¾è²¨", 
                nav: "ë¡¯ë°ë°±í™”ì  ê´‘ë³µì ", 
                desc: "åˆé¤åƒBIFFå»£å ´é»‘ç³–é¤…ã€‚<br><strong>æ¨‚å¤©ç™¾è²¨å…‰å¾©åº—</strong>ï¼šç›´è¡é ‚æ¨“ RF è§€æ™¯å° (å…è²»)ï¼Œçœ‹å½±å³¶å¤§æ©‹å…¨æ™¯ã€‚",
                transport: "ğŸš• <strong>ç”˜å·æ´ â†’ å—æµ¦æ´</strong> (ç´„15åˆ† / â‚©7,000)",
                shopTag: "Mart"
            },
            { 
                time: "18:30 - 20:30", 
                act: "ğŸ¥© æ™šé¤ï¼šOld Mansion ç‡’è‚‰", 
                nav: "ì„œë©´ ê³ íƒ", 
                desc: "è¥¿é¢è€å±‹æ”¹å»ºçš„æ°›åœçƒ¤è‚‰åº—ã€‚å¦‚æœæ’å¤ªä¹…å¯æ”¹åƒã€Œå‘³è´Šç‹ã€æˆ–ã€Œæ²³å—è±¬è‚‰ã€ã€‚",
                tip: "åƒå®Œå¯é€›è¥¿é¢åœ°ä¸‹è¡—ï¼Œæˆ–å» Standard Bread åƒç”œé»ã€‚"
            }
        ]},
        { day: "Day 2", title: "1/11 (å…­) æ±é‡œå±±æµ·å²¸å…¨è¦½", items: [
            { 
                time: "09:00 (æº–æ™‚)", 
                act: "ğŸš€ å‡ºç™¼å‰å¾€æ©Ÿå¼µ Luge", 
                nav: "ìŠ¤ì¹´ì´ë¼ì¸ë£¨ì§€ ë¶€ì‚°", 
                desc: "<strong>çµ•å°ä¸èƒ½é²åˆ°ï¼</strong>é€±å…­è»Šå¤šï¼Œç‚ºäº†æ¶ç¬¬ä¸€æ‰¹å…¥å ´å¿…é ˆæ—©èµ°ã€‚",
                transport: "ğŸš• <strong>è¥¿é¢ â†’ Skyline Luge</strong><br>è»Šç¨‹ï¼šç´„ 40-50 åˆ†é˜<br>è»Šè³‡ï¼šç´„ â‚©25,000 - 30,000 (åˆ†æ”¤åˆ’ç®—)"
            },
            { 
                time: "10:00 - 11:30", 
                act: "ğŸï¸ Skyline Luge æ–œå¡æ»‘è»Š", 
                nav: "ìŠ¤ì¹´ì´ë¼ì¸ë£¨ì§€ ë¶€ì‚°", 
                desc: "å»ºè­°å…ˆä¸Šç¶²è²·ç¥¨ (Klook/KKday)ã€‚æ¨è–¦è²· 2-3 æ¬¡åˆ¸ï¼Œç¬¬ä¸€æ¬¡æ»‘ç°¡æ˜“è³½é“ï¼Œç¬¬äºŒæ¬¡è¡åˆºã€‚"
            },
            { 
                time: "11:30 - 13:30", 
                act: "ğŸ½ï¸ æ¨‚å¤© Premium Outlet (åˆé¤)", 
                nav: "ë¡¯ë°í”„ë¦¬ë¯¸ì—„ì•„ìš¸ë › ë™ë¶€ì‚°ì ", 
                desc: "å°±åœ¨ Luge å°é¢ã€‚3F ç¾é£Ÿè¡—åƒåˆé¤ï¼Œé †ä¾¿é€› Nike/Adidasã€‚"
            },
            { 
                time: "14:00 - 16:10", 
                act: "â˜• é’æ²™æµ¦ (çŒç±ƒé«˜æ‰‹å¹³äº¤é“)", 
                nav: "í•´ìš´ëŒ€ë¸”ë£¨ë¼ì¸íŒŒí¬ ì²­ì‚¬í¬ì •ê±°ì¥", 
                desc: "åˆ—è»Šç¶“éæ™‚å¿…æ‹ã€‚ä¸‹åˆèŒ¶æ¨è–¦ï¼šDiart Coffee (KaymakéºµåŒ…) æˆ– Alice Donutã€‚",
                transport: "ğŸš• <strong>Outlet â†’ é’æ²™æµ¦</strong> (ç´„15åˆ† / â‚©9,000)"
            },
            { 
                time: "16:10 (é›†åˆ)", 
                act: "ğŸš‰ å¤©ç©ºè† å›Šåˆ—è»Š (é’æ²™æµ¦ç«™)", 
                nav: "í•´ìš´ëŒ€ë¸”ë£¨ë¼ì¸íŒŒí¬ ì²­ì‚¬í¬ì •ê±°ì¥", 
                desc: "<strong>è«‹ææ—©20åˆ†é˜åˆ°é’æ²™æµ¦ç«™ 2F å ±åˆ°ã€‚</strong><br>è·¯ç·šï¼šé’æ²™æµ¦ â†’ å°¾æµ¦ (å¤•é™½æ™‚æ®µ)ã€‚"
            },
            { 
                time: "17:30 - 20:00", 
                act: "ğŸ›ï¸ æ–°ä¸–ç•Œç™¾è²¨ Centum City", 
                nav: "ì‹ ì„¸ê³„ë°±í™”ì  ì„¼í…€ì‹œí‹°ì ", 
                desc: "å¾å°¾æµ¦æ­è»Šå»ã€‚<strong>æ³¨æ„ï¼š20:30 æ‰“çƒŠã€‚</strong><br>é‡é»ï¼šGentle Monster (1F)ã€B1 ç”œé»ä¼´æ‰‹ç¦®ã€‚",
                shopTag: "Department"
            },
            { 
                time: "20:30", 
                act: "ğŸ¥© æ™šé¤ï¼šå‘³è´Šç‹é¹½çƒ¤è‚‰ (è¥¿é¢)", 
                nav: "ë§›ì°¬ë“¤ì™•ì†Œê¸ˆêµ¬ì´ ì„œë©´ì ", 
                desc: "é¿é–‹æµ·é›²å°æ’éšŠåœ°ç„ï¼Œå›è¥¿é¢åƒå®Œç›´æ¥å›é£¯åº—ã€‚"
            }
        ]},
        { day: "Day 3", title: "1/12 (æ—¥) å»£å®‰é‡Œ & è¿”å®¶", items: [
            { 
                time: "10:40 (åˆ°åº—)", 
                act: "ğŸœ åˆé¤ï¼šNasari Sigdang æµ·é®®éºµ", 
                nav: "ê´‘ì•ˆë¦¬ ë‚˜ì‚¬ë¦¬ì‹ë‹¹", 
                desc: "11:00 é–‹é–€ï¼Œå»ºè­° 10:40 å…ˆå»æ’éšŠç™»è¨˜ï¼Œæ¶ç¬¬ä¸€è¼ªçª—é‚Šä½ã€‚<br>å¿…é»ï¼šæµ·é®®åˆ€å‰Šéºµã€æµ·é®®è”¥é¤…ã€‚",
                transport: "ğŸš• <strong>è¥¿é¢ â†’ å»£å®‰é‡Œ</strong> (ç´„20åˆ† / â‚©10,000)"
            },
            { 
                time: "12:30 - 14:30", 
                act: "ğŸŒŠ å»£å®‰é‡Œæµ·é‚Š & å’–å•¡", 
                nav: "ê´‘ì•ˆë¦¬í•´ìˆ˜ìš•ì¥", 
                desc: "æ•£æ­¥æ‹å»£å®‰å¤§æ©‹ã€‚æ¨è–¦å’–å•¡ï¼šAll Sunday (è²æœ)ã€Cafe come and see meã€‚"
            },
            { 
                time: "15:00 - 18:00", 
                act: "ğŸ è¥¿é¢ Olive Young æœ€å¾Œè£œè²¨", 
                nav: "ì˜¬ë¦¬ë¸Œì˜ ì„œë©´íƒ€ìš´", 
                desc: "NCç™¾è²¨ (ä¾¿å®œé‹è¡£)ã€Olive Young (ç¾å¦)ã€Object (æ–‡å‰µ)ã€‚",
                shopTag: "OY"
            },
            { 
                time: "18:30", 
                act: "ğŸš• å‰å¾€æ©Ÿå ´ (åœ‹éš›ç·š)", 
                nav: "ê¹€í•´êµ­ì œê³µí•­ êµ­ì œì„  ì¶œë°œ", 
                desc: "å›é£¯åº—æ‹¿è¡Œæã€‚é€±æ—¥æ™šä¸Šè»Šå¤šï¼Œè«‹é ç•™ 45 åˆ†é˜è»Šç¨‹ã€‚<br><strong>å®šä½ï¼šåœ‹éš›ç·šå‡ºç™¼å±¤</strong>",
                transport: "ğŸš• <strong>è¥¿é¢ â†’ é‡‘æµ·æ©Ÿå ´</strong><br>é ç®—ï¼šâ‚©20,000 å·¦å³"
            }
        ]}
    ];

    // ==========================================
    // 3. æ ¸å¿ƒé‚è¼¯
    // ==========================================

    function init() {
        renderSchedule();
        renderShoppingList("All");
    }

    function renderSchedule() {
        const container = document.getElementById('page-schedule');
        let html = '';
        
        scheduleData.forEach(day => {
            html += `
                <div class="day-header">
                    <span class="day-badge">${day.day}</span>
                    <span class="day-title">${day.title}</span>
                </div>
                <div class="timeline">
            `;
            
            day.items.forEach(item => {
                // æŒ‰éˆ•ç”Ÿæˆ
                let buttons = '';
                if(item.nav) {
                    buttons += `<a href="https://map.naver.com/p/search/${encodeURIComponent(item.nav)}" target="_blank" class="btn btn-map"><span>ğŸ“</span> å°èˆª</a>`;
                }
                if(item.shopTag) {
                    buttons += `<div onclick="filterShop('${item.shopTag}')" class="btn btn-shop"><span>ğŸ›ï¸</span> å¿…è²·</div>`;
                }

                // è³‡è¨Šå¡Šç”Ÿæˆ (é‚„åŸè—è‰²äº¤é€šæ¡†)
                let extras = '';
                if(item.transport) extras += `<div class="transport-box">${item.transport}</div>`;
                if(item.tip) extras += `<div class="tip-box">ğŸ’¡ ${item.tip}</div>`;

                html += `
                    <div class="timeline-item">
                        <div class="time">${item.time}</div>
                        <div class="activity">${item.act}</div>
                        <div class="details">${item.desc}</div>
                        ${extras}
                        <div class="action-buttons">${buttons}</div>
                    </div>
                `;
            });
            html += `</div>`; // End timeline
        });
        container.innerHTML = html;
    }

    function renderShoppingList(filterTag) {
        const container = document.getElementById('shopping-list-container');
        container.innerHTML = '';
        
        const list = filterTag === "All" ? shoppingData : shoppingData.filter(i => i.tag === filterTag);
        
        if(filterTag !== "All") {
            container.innerHTML = `<div style="margin-bottom:15px;"><button onclick="renderShoppingList('All')" style="padding:8px 15px; border:none; background:#eee; border-radius:20px; color:#555;">â¬…ï¸ é¡¯ç¤ºå…¨éƒ¨</button></div>`;
        }

        list.forEach((item, index) => {
            const checkedClass = item.bought ? 'checked' : '';
            const checkState = item.bought ? 'checked' : '';
            
            let imgHTML = '';
            if(item.img) {
                // åœ–ç‰‡è®€å–å¤±æ•—æ™‚é¡¯ç¤ºåœ–ç¤º
                imgHTML = `<img src="${item.img}" class="shop-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
                           <span style="display:none; font-size:24px;">ğŸ›ï¸</span>`; 
            } else {
                imgHTML = `<span style="font-size:24px;">ğŸ›ï¸</span>`;
            }
            
            const div = document.createElement('div');
            div.className = `shop-item ${checkedClass}`;
            div.innerHTML = `
                <div class="shop-check-container">
                    <input type="checkbox" class="shop-check" ${checkState} onchange="toggleBuy(${index})">
                </div>
                <div class="shop-img-box">${imgHTML}</div>
                <div class="shop-info">
                    <span class="shop-tag ${item.tag}">${item.tag}</span>
                    <h4>${item.name}</h4>
                    <span style="font-size:0.85em; color:#666;">${item.note}</span>
                </div>
            `;
            container.appendChild(div);
        });
    }

    function toggleBuy(index) {
        shoppingData[index].bought = !shoppingData[index].bought;
        const currentFilterBtn = document.querySelector('#shopping-list-container button');
        const currentFilter = currentFilterBtn ? shoppingData[index].tag : "All";
        renderShoppingList(currentFilter);
    }

    function filterShop(tag) {
        switchPage('shopping');
        renderShoppingList(tag);
    }

    function switchPage(pageId) {
        document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        
        document.getElementById(`page-${pageId}`).classList.add('active');
        
        if(pageId === 'schedule') document.querySelectorAll('.nav-item')[0].classList.add('active');
        if(pageId === 'shopping') document.querySelectorAll('.nav-item')[1].classList.add('active');
        if(pageId === 'calc') document.querySelectorAll('.nav-item')[2].classList.add('active');
        window.scrollTo(0,0);
    }

    function calculate() {
        const amount = parseFloat(document.getElementById('krw-input').value);
        const rate = parseFloat(document.getElementById('rate-input').value);
        const people = parseInt(document.getElementById('split-input').value);

        if(isNaN(amount) || isNaN(rate)) {
            alert("è«‹è¼¸å…¥æ­£ç¢ºæ•¸å­—");
            return;
        }

        const totalTWD = Math.round(amount / rate);
        const perPerson = Math.round(totalTWD / people);

        document.getElementById('res-twd').innerText = totalTWD.toLocaleString();
        document.getElementById('res-split').innerText = perPerson.toLocaleString();
        document.getElementById('calc-result').style.display = 'block';
    }

    init();
</script>
</body>
</html>
